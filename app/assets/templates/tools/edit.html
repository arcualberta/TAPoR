
<div ng-controller='ToolsEditCtrl' class='tapor-container'>
  <div class='row'>
  <form id="tool_form" class="form-horizontal" role="form">
    
    <!-- name -->
    <div class="form-group">
      <label for="inputName" class="col-sm-2 control-label">Name</label>
      <div class="col-sm-5">
        <input type="text" class="form-control" id="inputName" placeholder="Name" ng-model="data.name" required>
      </div>
    </div>
    
    <!-- image -->

    <div class="form-group">
      <label for="inputImage" class="col-sm-2 control-label">Image</label>
      <div class="col-sm-5">
        
        <!-- <div class="input-group"> -->


        <span class="btn btn-default btn-file">
          <!-- Browse <input id='inputImage' type="file" ng-model='data.image_path' ng-change='updateImage'> -->
          Browse <input type="file" fileread="data.image"/>
        </span>
        
        <img src="{{data.image}}" id="imageContainer" width="450" alt="Image preview...">
        <!-- <input type="text" class="form-control" id="inputEmail" placeholder="Image" ng-model="data.email"> -->
          
        
        
        <!-- </div> -->
      </div>
    </div>


    <!-- description -->

    <div class="form-group">
      <label for="inputDescription" class="col-sm-2 control-label">Description</label>
      <div class="col-sm-5	">
        <textarea class="form-control vertical-text-area" rows="3" id="inputDescription" ng-model="data.description"></textarea>
      </div>
    </div>

    <!-- stars -->

    <div class="form-group">
      <label for="inputStars" class="col-sm-2 control-label">Rating</label>
      <div class="col-sm-5 rating">
        <div star-rating rating-value="data.tool_ratings[0].stars" on-rating-selected="rateFunction(data.tool_ratings[0].stars)" max="5"></div>
      </div>
    </div>   

    <!-- tags -->

    <div class="form-group">
      <label for="inputTags" class="col-sm-2 control-label">Tags</label>
      <div class="col-sm-5">
        <!-- <input type="text" class="form-control" id="inputTags" placeholder="Tags" ng-model="data.tool_tags.tags"> -->
        <div selectize="tag_config" options='tag_options' ng-model="data.tool_tags.tags"></div>

      </div>
    </div>

    <!-- comment -->

    <div class="form-group">
      <label for="inputComment" class="col-sm-2 control-label">Comment</label>
      <div class="col-sm-5  ">
        <textarea class="form-control vertical-text-area" rows="3" id="inputComment" ng-model="data.comments[0].content"></textarea>
      </div>
    </div>

    <!-- creator name -->

    <div class="form-group">
      <label for="inputCreatorsName" class="col-sm-2 control-label">Creator's name</label>
      <div class="col-sm-5">
        <input type="text" class="form-control" id="inputCreatorsName" placeholder="Name" ng-model="data.creators_name">
      </div>
    </div>

    <!-- creator email -->

    <div class="form-group">
      <label for="inputCreatorsEmail" class="col-sm-2 control-label">Creator's email</label>
      <div class="col-sm-5">
        <input type="email" class="form-control" id="inputCreatorsEmail" placeholder="Email" ng-model="data.creators_email">
      </div>
    </div>

    <!-- creator url -->

    <div class="form-group">
      <label for="inputCreatorsURL" class="col-sm-2 control-label">Creator's URL</label>
      <div class="col-sm-5">
        <input type="url" class="form-control" id="inputCreatorsURL" placeholder="URL" ng-model="data.creators_url">
      </div>
    </div>

    <!-- approved -->

    <div class="form-group" nf-if="current_user.is_admin">
      <label for="inputApproved" class="col-sm-2 control-label">Approved</label>
      <div class="col-sm-5">
        <ul>
          <li class="checkbox">
            <label>
              <input type="checkbox" name="is_approved" value="is_approved" id="inputApproved" ng-model="data.is_approved">
            </label>
          </li>
        </ul>
      </div>
    </div>

    <!-- attributes -->

    <div class="form-group" ng-repeat='attribute in data.attribute_types track by $index' >
      <label for="inputName" class="col-sm-2 control-label">{{attribute.name}}</label>
      <div class="col-sm-5">
         <div multselect is-multiple="attribute.is_multiple" model="attribute.model" name="attribute.name" values="attribute.possible_values"> </div>
      </div>
    </div>
   
    <!-- comments -->
  
    <div ng-if='editing_tool' class="form-group" >
      <label for="inputComments" class="col-sm-2 control-label">Comments</label>
      <div class="col-sm-5">
        <table class="table table-striped">
          <tr>
            <th> 
              &nbsp;
            </th>
            <th> 
              User
            </th>
            <th> 
              Comment
            </th>
            <th> 
              Pin
            </th>
            <th> 
              Hide
            </th>
          </tr>
          <tr ng-repeat='comment in data.comments track by $index'>
            <td> 
              <img src="{{comment.user.image_url}}" class="img-circle">
            </td>
            <td> 
              {{comment.user.name}}
            </td>
            <td> 
              {{comment.content}}
            </td>
            <td> 
              <label>
                <input type="checkbox" name="is_pinned" value="is_pinned" id="inputIsBlocked" ng-model="comment.is_pinned" ng-change="updateIsPinned(comment.id, comment.is_pinned)"> Is Pinned
              </label>
            </td>
            <td> 
              <label>
                <input type="checkbox" name="is_hidden" value="is_hidden" id="inputIsBlocked" ng-model="comment.is_hidden" ng-change="updateIsPinned(comment.id, comment.is_hidden)"> Is Hidden
              </label>
            </td>
          </tr>
        </table>
         

       </div>

    </div>

    <!-- end -->

    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <button ng-click="createorUpdateTool()" class="btn btn-primary">Save</button>
      </div>
    </div>

  </form>
  </div>
</div>